<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>‘Best’ practices for data projects – 2025 Coriell Bioinformatics Internship</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./linux.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-128e0f949f8f902082bc899829804d79.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data-best-practices.html">‘Best’ practices for data projects</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">2025 Coriell Bioinformatics Internship</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-best-practices.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">‘Best’ practices for data projects</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linux.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Command line basics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R programming basics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-viz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Effective data visualizations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./presenting-science.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Scientific presentations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summarized-experiments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practical introduction to SummarizedExperiments</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./differential-expression-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Differential Expression Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./differential-methylation-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Differential Methylation Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#quick-note-todo" id="toc-quick-note-todo" class="nav-link active" data-scroll-target="#quick-note-todo">Quick note (TODO)</a></li>
  <li><a href="#why-care-about-data-management" id="toc-why-care-about-data-management" class="nav-link" data-scroll-target="#why-care-about-data-management">Why care about data management?</a></li>
  <li><a href="#file-management" id="toc-file-management" class="nav-link" data-scroll-target="#file-management">File Management</a>
  <ul class="collapse">
  <li><a href="#file-types-and-file-names" id="toc-file-types-and-file-names" class="nav-link" data-scroll-target="#file-types-and-file-names">File types and file names</a></li>
  <li><a href="#file-naming" id="toc-file-naming" class="nav-link" data-scroll-target="#file-naming">File naming</a></li>
  <li><a href="#more-on-filenames" id="toc-more-on-filenames" class="nav-link" data-scroll-target="#more-on-filenames">More on filenames</a></li>
  <li><a href="#create-analysis-friendly-data---tidy-data" id="toc-create-analysis-friendly-data---tidy-data" class="nav-link" data-scroll-target="#create-analysis-friendly-data---tidy-data">Create analysis friendly data - tidy data</a></li>
  <li><a href="#untidy-data" id="toc-untidy-data" class="nav-link" data-scroll-target="#untidy-data">Untidy(?) data</a></li>
  <li><a href="#save-and-lock-all-raw-data" id="toc-save-and-lock-all-raw-data" class="nav-link" data-scroll-target="#save-and-lock-all-raw-data">Save and lock all raw data</a></li>
  <li><a href="#large-files" id="toc-large-files" class="nav-link" data-scroll-target="#large-files">Large files</a></li>
  <li><a href="#backups" id="toc-backups" class="nav-link" data-scroll-target="#backups">Backups</a>
  <ul class="collapse">
  <li><a href="#use-the-3-2-1-rule" id="toc-use-the-3-2-1-rule" class="nav-link" data-scroll-target="#use-the-3-2-1-rule">Use the 3-2-1 rule:</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#project-organization" id="toc-project-organization" class="nav-link" data-scroll-target="#project-organization">Project Organization</a>
  <ul class="collapse">
  <li><a href="#look-familiar" id="toc-look-familiar" class="nav-link" data-scroll-target="#look-familiar">Look familiar?</a></li>
  <li><a href="#project-structure" id="toc-project-structure" class="nav-link" data-scroll-target="#project-structure">Project structure</a>
  <ul class="collapse">
  <li><a href="#a-more-complex-example" id="toc-a-more-complex-example" class="nav-link" data-scroll-target="#a-more-complex-example">A more complex example</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#tracking-changes" id="toc-tracking-changes" class="nav-link" data-scroll-target="#tracking-changes">Tracking Changes</a>
  <ul class="collapse">
  <li><a href="#record-all-steps-used-to-generate-the-data" id="toc-record-all-steps-used-to-generate-the-data" class="nav-link" data-scroll-target="#record-all-steps-used-to-generate-the-data">Record all steps used to generate the data</a></li>
  <li><a href="#manual-version-control" id="toc-manual-version-control" class="nav-link" data-scroll-target="#manual-version-control">Manual version control</a></li>
  <li><a href="#version-control-with-git" id="toc-version-control-with-git" class="nav-link" data-scroll-target="#version-control-with-git">Version control with git</a></li>
  </ul></li>
  <li><a href="#software" id="toc-software" class="nav-link" data-scroll-target="#software">Software</a>
  <ul class="collapse">
  <li><a href="#quick-tips-to-improve-your-scripts" id="toc-quick-tips-to-improve-your-scripts" class="nav-link" data-scroll-target="#quick-tips-to-improve-your-scripts">Quick tips to improve your scripts</a>
  <ul class="collapse">
  <li><a href="#place-a-description-at-the-top-of-every-script" id="toc-place-a-description-at-the-top-of-every-script" class="nav-link" data-scroll-target="#place-a-description-at-the-top-of-every-script">Place a description at the top of every script</a></li>
  <li><a href="#decompose-programs-into-functions" id="toc-decompose-programs-into-functions" class="nav-link" data-scroll-target="#decompose-programs-into-functions">Decompose programs into functions</a></li>
  <li><a href="#give-functions-and-variables-meaningful-names" id="toc-give-functions-and-variables-meaningful-names" class="nav-link" data-scroll-target="#give-functions-and-variables-meaningful-names">Give functions and variables meaningful names</a></li>
  <li><a href="#do-not-control-program-flow-with-comments" id="toc-do-not-control-program-flow-with-comments" class="nav-link" data-scroll-target="#do-not-control-program-flow-with-comments">Do not control program flow with comments</a></li>
  <li><a href="#use-a-consistent-style" id="toc-use-a-consistent-style" class="nav-link" data-scroll-target="#use-a-consistent-style">Use a consistent style</a></li>
  <li><a href="#dont-use-right-hand-assignment" id="toc-dont-use-right-hand-assignment" class="nav-link" data-scroll-target="#dont-use-right-hand-assignment">Don’t use right hand assignment</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#resources-references" id="toc-resources-references" class="nav-link" data-scroll-target="#resources-references">Resources &amp; References</a>
  <ul class="collapse">
  <li><a href="#best-practices" id="toc-best-practices" class="nav-link" data-scroll-target="#best-practices">Best practices</a></li>
  <li><a href="#bioinformatics" id="toc-bioinformatics" class="nav-link" data-scroll-target="#bioinformatics">Bioinformatics</a></li>
  <li><a href="#proficiency-with-computational-tools" id="toc-proficiency-with-computational-tools" class="nav-link" data-scroll-target="#proficiency-with-computational-tools">Proficiency with computational tools</a></li>
  <li><a href="#r" id="toc-r" class="nav-link" data-scroll-target="#r">R</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">‘Best’ practices for data projects</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Science requires reproducibility, not only to ensure that your results are generalizable but also to make your life easier. One overlooked aspect of of learning data science is creating consistent and clear organization of your projects and learning how to keep your data safe and easily searchable.</p>
<section id="quick-note-todo" class="level2">
<h2 class="anchored" data-anchor-id="quick-note-todo">Quick note (TODO)</h2>
<p><strong>Citations incoming</strong>. Please note that much of this document does not contain original material. References are listed at the end of the chapter (I still need to get my .bib files in order to give proper attribution).</p>
</section>
<section id="why-care-about-data-management" class="level2">
<h2 class="anchored" data-anchor-id="why-care-about-data-management">Why care about data management?</h2>
<p>Computing is now an essential part of research. This is outlined beautifully in the paper, <a href="https://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.2002050">“All biology is computational biology”</a> by Florian Markowetz. Data is getting bigger and bigger and we need to be equipped with the tools for storing, manipulating, and communicating insights derived from it. However, most researchers are never taught good computational practices. Computational best practices are imperitive. Implementing best (or good enough) practices can improve reproducibility, ensure correctness, and increase efficiency.</p>
</section>
<section id="file-management" class="level1">
<h1>File Management</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/golum.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<section id="file-types-and-file-names" class="level2">
<h2 class="anchored" data-anchor-id="file-types-and-file-names">File types and file names</h2>
<p>As a data scientist you’ll be dealing with a lot of files but have you ever considered <em>what</em> a file is? Files come in all shapes and formats. Some are very application specific and require specialized programs to open. For example, consider <a href="https://en.wikipedia.org/wiki/DICOM">DICOM</a> files that are used to store and manipulate radiology data. Luckily, in bioinformatics we tend to deal mainly with simple, plain text files, most often. Plain text files are typically designed to be both human and machine-readable. If you have the choice of saving any data, you should know that some formats will make your life easier. Certain file formats like TXT, CSV, TSV, JSON, and YAML are standard plain text file formats that are easy to share and easy to open and manipulate. Because of this, you should prefer to store your data in machine-readable formats. Avoid .xlsx files for storing data. Prefer TXT, CSV, TSV, JSON, YAML, and HDF5.</p>
<p>If you have very large text files then you can use compression utilities to save space. Most bioinformatics software is designed to work well with gzip compressed data. <code>gzip</code> is a relatively old compression format. You could also consider using <code>xz</code> as a means to compress your data - just know that <code>xz</code> compression is less supported across tools.</p>
</section>
<section id="file-naming" class="level2">
<h2 class="anchored" data-anchor-id="file-naming">File naming</h2>
<p>File naming is important but often overlooked. You want your files to be named logically and communicate their contents. You also want your files to be named in a way that a computer can easily read. For example, spaces in filenames are a royal pain when manipulating files on the command line.</p>
<p>To ensure filenames are computer friendly, don’t use spaces in filenames. Use only letters, numbers, and “-” “_” and “.” as delimiters. For example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode Bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bad</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">data</span> for jozef.txt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Okay</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ex">data-for-jozef.txt</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Best</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="ex">2023-11-09_repetitive-element-counts.txt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Quiz</strong></p>
<p>I have a directory with the following files:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode Bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">a.txt</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">b.txt</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">c.txt</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">file</span> with spaces in the name.txt</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="ex">some</span> other file.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>What does the following code return? (Expected: For each file in the directory print the filename)</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode Bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> FILE <span class="kw">in</span> <span class="va">$(</span><span class="fu">ls</span><span class="va">)</span><span class="kw">;</span> <span class="cf">do</span> <span class="bu">echo</span> <span class="va">$FILE</span><span class="kw">;</span> <span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Bash interprets every space as a new word!</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode Bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">a.txt</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">b.txt</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ex">c.txt</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">file</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">with</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="ex">spaces</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="er">in</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="ex">the</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="ex">name.txt</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="ex">some</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="ex">other</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="ex">file.txt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pro-tip</strong></p>
<p>A simple alternative here is to use a text document with the basenames the files you want to loop over and then loop over the lines of the file instead.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode Bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="va">SAMPLES</span><span class="op">=</span>sample-names.txt</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> SAMPLE <span class="kw">in</span> <span class="va">$(</span><span class="fu">cat</span> <span class="va">$SAMPLES)</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="ex">doStuff</span> <span class="va">${SAMPLE}</span>.txt<span class="kw">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="more-on-filenames" class="level2">
<h2 class="anchored" data-anchor-id="more-on-filenames">More on filenames</h2>
<p>It cannot be stressed enough how important filenames can be for an analysis. To get the most out of your files and to avoid catastrpohic failures, you should stick to some basic principles for naming files. First, use consistent and unique identifiers across all files that you generate for an experiment. For example, if you’re conducting a study that has both RNA-seq and ATAC-seq data performed on the same subjects, don’t name the files from the RNA-seq experiment <code>subject1.fq.fz</code> and the files from the ATAC-seq experiment <code>control_subject1.fq.gz</code> if they refer to the same sample. For small projects, it’s fairly easy to create consistent and unique IDs for each subject. For large projects unique random IDs can be used.</p>
<p>For example, the following filenames would be bad:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">subject1-control_at_96hr1.txt</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">s1_ctl-at-4days_2.txt</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ex">s2TRT4d1.txt</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="ex">sbj2_Treatment_4_Days_Replicate_2.txt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Instead, look at these filenames.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode Bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">subject1_control_4days_rep1.txt</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">subject1_control_4days_rep2.txt</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">subject2_treatment_4days_rep1.txt</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="ex">subject2_treatment_4days_rep2.txt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>These are better. <em>Why</em> are they better? They are consistent. The delimiter is consistent between the words (“_“) and each of the words represents something meaningful about the sample. These filenames also do not contain any spaces and can easily be parsed automatically.</p>
<p>File naming best practices also apply to naming executable scripts. The name of the file should describe the function of the script. For example,</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode Bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">01_align_with_STAR.sh</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>is better than simply naming the file</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode Bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">01_script.sh</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pro-tip</strong></p>
<p>One easy way to create unique random IDs for a large project is to concatenate descriptions and take the SHA/MDA5 hashsum.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode Bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"subject1_control_4days_rep1"</span> <span class="kw">|</span> <span class="ex">sha256</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 57f458a294542b2ed6ac14ca64d3c8e4599eed7a</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"subject1_control_4days_rep2"</span> <span class="kw">|</span> <span class="ex">shasum</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># b6ea9d729e57cce68b37de390d56c542bc17dea6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="create-analysis-friendly-data---tidy-data" class="level2">
<h2 class="anchored" data-anchor-id="create-analysis-friendly-data---tidy-data">Create analysis friendly data - tidy data</h2>
<p>The term <a href="https://vita.had.co.nz/papers/tidy-data.html">tidy data</a> was defined by Hadley Wickham to describe data which is amenable to downstream analysis. Most people are familiar with performing a quick and dirty data analysis in a program like Excel. You may have also used some of Excel’s fancy features for coloring cells, adding bold and underlines to text, and formatting cells with other decorations. All of this tends to just be extra fluff. If you format you data properly then it will be much easier to perform downstream analysis on and will not require the use of extra decorations. This is true even in Excel!</p>
<p>To conform to the requirements of being <em>tidy</em>, the data should follow some simple principles:</p>
<ol type="1">
<li>Each variable must have its own column.</li>
<li>Each observation must have its own row.</li>
<li>Each value must have its own cell.
<ol type="a">
<li>Don’t cram two variables into one value. e.g.&nbsp;“male_treated”.</li>
<li>Don’t embed units into data. e.g.&nbsp;“3.4kg”. Instead, put in column name e.g.&nbsp;“weight_kg” = 3.4</li>
</ol></li>
</ol>
<p><img src="images/tidy-1.png" class="img-fluid"></p>
<p>Once your data is in this format, it can easily be read into downstream programs like R, or parsed with command line text editing programs like <code>sed</code>.</p>
<p>The <code>iris</code> dataset in R provides a classic example of this format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
<p><strong>Pro-tip</strong></p>
<p><code>data.frame</code> like objects can be stored and retrieved efficiently using the Apache Arrow format instead of CSV files:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> arrow<span class="sc">::</span><span class="fu">read_parquet</span>(<span class="st">"path/to/file.parquet"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>arrow<span class="sc">::</span><span class="fu">write_parquet</span>(df, <span class="st">"path/to/different_file.parquet"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>see <a href="https://arrow.apache.org/docs/r/index.html">R arrow</a> for more details. There’s also the <a href="https://nanoparquet.r-lib.org/">nanoparquet</a> package which provides a light weight reader/writer for parquet files.</p>
</section>
<section id="untidy-data" class="level2">
<h2 class="anchored" data-anchor-id="untidy-data">Untidy(?) data</h2>
<p>Some data formats are not amenable to the ‘tidy’ structure, i.e.&nbsp;they’re just not best represented as long tables. For example, large/sparse matrices, geo-spatial data, R objects, etc.the lesson here is to store data in the format that is most appropriate for the data. For example, don’t convert a matrix to a long format and save as a tsv file! Save it as an <code>.rds</code> file instead. Large matrices can also be efficiently stored as <a href="https://cran.r-project.org/web/packages/hdf5r/vignettes/hdf5r.html">HDF5 files</a>. Sparse matrices can be saved and accessed eficiently using the <a href="https://matrix.r-forge.r-project.org/">Matrix</a> package in R. And if you are accessing the same data often, consider storing as a <a href="https://www.sqlite.org/index.html">SQLite</a> database and accessing with <a href="https://dbplyr.tidyverse.org/">dbplyr</a> or <a href="https://www.sqlalchemy.org/">sqlalchemy</a> in Python. The main point is don’t force data into a format that you’re familiar with only because you’re familiar with that format. This will often lead to large file sizes and inefficient performance.</p>
</section>
<section id="save-and-lock-all-raw-data" class="level2">
<h2 class="anchored" data-anchor-id="save-and-lock-all-raw-data">Save and lock all raw data</h2>
<p>Keep raw data in its unedited form. This includes not making changes to filenames. In bioinformatics, it’s common to get data from a sequencing facility with incomprehensible filenames. Don’t fall victim to the temptation of changing these filenames! Instead, it’s much better to keep the filenames exactly how they were sent to you and simply create a spreadsheet that maps the files to their metadata. In the case of a sample mix-up, it’s much easier to make a change to a row in a spreadsheet then to track down all of the filenames that you changed and ensure they’re correctly modified.</p>
<p>Once you have your raw data, you don’t want the raw data to change in any way that is not documented by code. To ensure this, you can consider changing file permissions to make the file immutable (unchangable). Using bash, you can change file permissions with:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chattr</span> +i myfile.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you’re using Excel for data analysis, lock the spreadsheet with the raw data and only make references to this sheet when performing calculations.</p>
</section>
<section id="large-files" class="level2">
<h2 class="anchored" data-anchor-id="large-files">Large files</h2>
<p>You’ll probably be dealing with files on the order of 10s of GBs. You <strong>do not</strong> want to be copying these files from one place to another. This increases confusion and runs the risk of introducing errors. Instead avoid making copies of large local files or persistent databases and simply link to the files.</p>
<p>You can use use soft links. A powerful way of finding an linking files can be done with <code>find</code></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Link all fastq files to a local directory</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> /path/to/fq/files <span class="at">-name</span> <span class="st">"*.fq.gz"</span><span class="er">)</span> <span class="ex">-exec</span> ln <span class="at">-s</span> {} . <span class="dt">\;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If using R, you can also sometimes specify a URL in place of a file path for certain functions.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Avoid downloading a large GTF file - reads GTF directly into memory</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://ftp.ebi.ac.uk/pub/databases/gencode/Gencode_human/release_44/gencode.v44.annotation.gtf.gz"</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>gtf <span class="ot">&lt;-</span> rtracklayer<span class="sc">::</span><span class="fu">import</span>(url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="backups" class="level2">
<h2 class="anchored" data-anchor-id="backups">Backups</h2>
<blockquote class="blockquote">
<p>There are two types of people, those who do backups and those who will do backups.</p>
</blockquote>
<p><strong>The following are NOT backup solutions:</strong></p>
<ul>
<li>Copies of data on the same disk</li>
<li>Dropbox/Google Drive</li>
<li>RAID arrays</li>
</ul>
<p>All of these solutions mirror the data. Corruption or ransomware will propagate. For example, if you corrupt a file on your local computer and then push that change to DropBox then the file on DropBox is now also corrupted. I’m sure some of these cloud providers have version controlled files but it’s better to just avoid the problem entirely by keeping good backups.</p>
<section id="use-the-3-2-1-rule" class="level3">
<h3 class="anchored" data-anchor-id="use-the-3-2-1-rule">Use the 3-2-1 rule:</h3>
<ul>
<li>Keep 3 copies of any important file: 1 primary and 2 backups.</li>
<li>Keep the files on 2 different media types to protect against different types of hazards.</li>
<li>Store 1 copy offsite (e.g., outside your home or business facility).</li>
</ul>
<p>A backup is only a backup if you can restore the files!</p>
</section>
</section>
</section>
<section id="project-organization" class="level1">
<h1>Project Organization</h1>
<section id="look-familiar" class="level2">
<h2 class="anchored" data-anchor-id="look-familiar">Look familiar?</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/home_organization.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="project-structure" class="level2">
<h2 class="anchored" data-anchor-id="project-structure">Project structure</h2>
<p>One of the most useful changes that you can make to your workflow is the create a consistent folder structure for all of your analyses and stick with it. Coming up with a consistent and generalizable structure can be challenging at first but some general guidelines are presented <a href="https://web.stanford.edu/~gentzkow/research/CodeAndData.pdf">here</a> and <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1000424">here</a></p>
<p>First of all, when beginning a new project, you should have some way of naming your projects. One good way of naming projects is to each project a descriptive name and append the date the project was started. For example, <code>brca_rnaseq_2023-11-09/</code> is better than <code>rnaseq_data/</code>. In six months when a collaborator wants their old BRCA data re-analyzed you’ll thank yourself for timestamping the project folder and giving it a descriptive name.</p>
<p>My personal structure for every project looks like:</p>
<pre><font color="#7DAEA3"><b>yyyymmdd_project-name/</b></font>
├── <font color="#7DAEA3"><b>data</b></font>
├── <font color="#7DAEA3"><b>doc</b></font>
├── README
├── <font color="#7DAEA3"><b>results</b></font>
│&nbsp;&nbsp; ├── <font color="#7DAEA3"><b>data-files</b></font>
│&nbsp;&nbsp; ├── <font color="#7DAEA3"><b>figures</b></font>
│&nbsp;&nbsp; └── <font color="#7DAEA3"><b>rds-files</b></font>
└── <font color="#7DAEA3"><b>scripts</b></font>
</pre>
<ul>
<li>Prefixing the project directory with the ISO date allows for easy sorting by date</li>
<li>a README text file is present at the top level of the directory with a short description about the project and any notes or updates</li>
<li><code>data/</code> should contain soft links to any raw data or the results of downloading data from an external source</li>
<li><code>doc/</code> contains metadata documents about the samples or other metadata information about the experiment</li>
<li><code>results/</code> contains only data generated within the project. It has sub-directories for <code>figures/</code>, <code>data-files/</code> and <code>rds-files/</code>. If you have a longer or more complicated analysis then add sub-directories indicating which script generated the results.</li>
<li><code>scripts/</code> contains all analysis scripts numbered in their order of execution. Synchronize the script names with the results they produce.</li>
</ul>
<section id="a-more-complex-example" class="level3">
<h3 class="anchored" data-anchor-id="a-more-complex-example">A more complex example</h3>
<pre><font color="#7DAEA3"><b>yyyymmdd_project-name/</b></font>
├── <font color="#7DAEA3"><b>data</b></font>
│&nbsp;&nbsp; ├── <font color="#7DAEA3"><b>00_fastq</b></font>
│&nbsp;&nbsp; ├── <font color="#7DAEA3"><b>01_fastqc</b></font>
│&nbsp;&nbsp; ├── <font color="#7DAEA3"><b>02_trimmed</b></font>
│&nbsp;&nbsp; └── <font color="#7DAEA3"><b>03_quants</b></font>
├── <font color="#7DAEA3"><b>delivered</b></font>
│&nbsp;&nbsp; └── <font color="#EA6962"><b>2022-09-11_analysis-results.zip</b></font>
├── <font color="#7DAEA3"><b>doc</b></font>
│&nbsp;&nbsp; └── sample-metadata.txt
├── project.Rproj
├── README
├── <font color="#7DAEA3"><b>results</b></font>
│&nbsp;&nbsp; ├── <font color="#7DAEA3"><b>data-files</b></font>
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── <font color="#7DAEA3"><b>04</b></font>
│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; └── <font color="#EA6962"><b>differential-expression.tsv.gz</b></font>
│&nbsp;&nbsp; │&nbsp;&nbsp; └── <font color="#7DAEA3"><b>05</b></font>
│&nbsp;&nbsp; │&nbsp;&nbsp;     └── <font color="#EA6962"><b>gsea-results.tsv.gz</b></font>
│&nbsp;&nbsp; ├── <font color="#7DAEA3"><b>figures</b></font>
│&nbsp;&nbsp; │&nbsp;&nbsp; ├── <font color="#7DAEA3"><b>04</b></font>
│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; ├── <font color="#D3869B"><b>ma-plots.png</b></font>
│&nbsp;&nbsp; │&nbsp;&nbsp; │&nbsp;&nbsp; └── <font color="#D3869B"><b>volcano-plots.png</b></font>
│&nbsp;&nbsp; │&nbsp;&nbsp; └── <font color="#7DAEA3"><b>05</b></font>
│&nbsp;&nbsp; │&nbsp;&nbsp;     └── <font color="#D3869B"><b>enrichment-plots.png</b></font>
│&nbsp;&nbsp; └── <font color="#7DAEA3"><b>rds-files</b></font>
│&nbsp;&nbsp;     └── <font color="#7DAEA3"><b>04</b></font>
│&nbsp;&nbsp;         └── SummarizedExperiment.rds
└── <font color="#7DAEA3"><b>scripts</b></font>
    ├── 01_fastqc.sh
    ├── 02_trim.sh
    ├── 03_quant.sh
    ├── 04_differential_expression.Qmd
    └── 05_gsea.Qmd</pre>
<p><strong>Pro-tip</strong></p>
<p>If using Rstudio, include an <code>.Rproj</code> file at the top level of your directory. Doing this enables you to use the <a href="https://here.r-lib.org/">here</a> package to reference data within your project in a relative fashion. For example, you can more easily save data with:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_volcano</span>(...)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"results"</span>, <span class="st">"figures"</span>, <span class="st">"04"</span>, <span class="st">"volcano-plots.png"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="tracking-changes" class="level1">
<h1>Tracking Changes</h1>
<section id="record-all-steps-used-to-generate-the-data" class="level2">
<h2 class="anchored" data-anchor-id="record-all-steps-used-to-generate-the-data">Record all steps used to generate the data</h2>
<p>Always document all steps you used to generate the data that’s present in your projects. This can be as simple as a README with some comments and a <code>wget</code> command or as complex as a <a href="https://snakemake.readthedocs.io/en/stable/index.html">snakemake</a> workflow. The point is, be sure you can track down the exact source of every file that you created or downloaded.</p>
<p>For example, a README documenting the creation of the files needed to generate a reference index might look like:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode Bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Transcripts:</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> http://ftp.ebi.ac.uk/pub/databases/gencode/Gencode_human/release_38/gencode.v38.transcripts.fa.gz</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Primary</span> Assembly:</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> http://ftp.ebi.ac.uk/pub/databases/gencode/Gencode_human/release_38/GRCh38.primary_assembly.genome.fa.gz</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="ex">Create</span> concatenated transcripts + genome for salmon <span class="er">(</span><span class="ex">i.e.</span> gentrome<span class="kw">)</span><span class="bu">:</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> gencode.v38.transcripts.fa.gz GRCh38.primary_assembly.genome.fa.gz <span class="op">&gt;</span> gentrome.fa.gz</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="ex">Create</span> decoys file for salmon:</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span> <span class="st">"&gt;"</span> <span class="op">&lt;(</span><span class="fu">gunzip</span> <span class="at">-c</span> GRCh38.primary_assembly.genome.fa.gz<span class="op">)</span> <span class="kw">|</span> <span class="fu">cut</span> <span class="at">-d</span> <span class="st">" "</span> <span class="at">-f</span> 1 <span class="op">&gt;</span> decoys.txt</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-i.bak</span> <span class="at">-e</span> <span class="st">'s/&gt;//g'</span> decoys.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For more complicated steps include a script. e.g.&nbsp;creating a new genome index, subsetting BAM files, accessing data from NCBI, etc.</p>
<p><strong>Pro-tip</strong></p>
<p>A simple way to build a data pipeline that is surprisingly robust is just to create scripts for each step and number them in the order that they should be executed.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode Bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">01_download.sh</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">02_process.py</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="ex">03_makeFigures.R</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can also include a runner script that will execute all of the above. Or, for more consistent workflows, use a workflow manager like <a href="https://training.nextflow.io/">Nextflow</a>, <a href="https://snakemake.readthedocs.io/en/stable/">Snakemake</a>, <a href="https://openwdl.org/">WDL</a>, or good ole’ <a href="https://swcarpentry.github.io/make-novice/">GNU Make</a></p>
</section>
<section id="manual-version-control" class="level2">
<h2 class="anchored" data-anchor-id="manual-version-control">Manual version control</h2>
<p>Version control refers to the practice of tracking changes in files and data over their lifetime. You should always track any changes made to your project over the entire life of the project. This can be done either manually or using a dedicated version control system. If doing this manually, add a file called “CHANGELOG.md” in your docs/ directory and add detailed notes in reverse chronological order.</p>
<p>For example:</p>
<pre><code>## 2016-04-08

* Switched to cubic interpolation as default.
* Moved question about family's TB history to end of questionnaire.

## 2016-04-06

* Added option for cubic interpolation.
* Removed question about staph exposure (can be inferred from blood test results).
</code></pre>
<p>If you make a significant change to the project, copy the whole directory, date it, and store it such that it will no longer be modified. Copies of these old projects can be compressed and saved with tar + xz compression</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode Bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-cJvf</span> old.20231109_myproject.tar.xz myproject/<span class="kw">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="version-control-with-git" class="level2">
<h2 class="anchored" data-anchor-id="version-control-with-git">Version control with git</h2>
<p><img src="images/git.png" class="img-fluid" data-fig-height="25%"></p>
<p><a href="https://git-scm.com/book/ms/v2/Getting-Started-About-Version-Control">git</a> is probably the <em>de facto</em> version control system in use today for tracking changes across software projects. You should strive to learn and use <code>git</code> to track your projects. Version control systems allow you to track all changes, comment on why changes were made, create parallel branches, and merge existing ones.</p>
<p><code>git</code> is primarily used for source code files. Microsoft Office files and PDFs can be stored with Github but it’s hard to track changes. Rely on Microsoft’s “Track Changes” instead and save frequently.</p>
<p>It’s not necessary to version control raw data (back it up!) since it shouldn’t change. Likewise, backup intermediate data and version control the scripts that made it.</p>
<p>For a quick primer on Git and GitHub check out the book <a href="https://happygitwithr.com/">Happy Git with R</a> or <a href="https://githubtraining.github.io/training-manual/#/">The Official GitHub Training Manual</a> Anyone in the lab can join the <a href="https://github.com/coriell-research">coriell-research</a> organization on Github and start tracking their code</p>
<p><strong>Be careful committing sensitive information to GitHub</strong></p>
</section>
</section>
<section id="software" class="level1">
<h1>Software</h1>
<section id="quick-tips-to-improve-your-scripts" class="level2">
<h2 class="anchored" data-anchor-id="quick-tips-to-improve-your-scripts">Quick tips to improve your scripts</h2>
<section id="place-a-description-at-the-top-of-every-script" class="level3">
<h3 class="anchored" data-anchor-id="place-a-description-at-the-top-of-every-script">Place a description at the top of every script</h3>
<p>The description should indicate who the author is. When the code was created. A short description of what the expected inputs and outputs are along with how to use the code. You three months from now will appreciate it when you need to revisit your analysis</p>
<p>For example:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env python3</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Gennaro Calendo</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2023-11-09</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># This scripts performs background correction of all images in the </span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  user supplied directory</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage ./correct-bg.py --input images/ --out_dir out_directory</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> image_correction <span class="im">import</span> background_correct</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> img <span class="kw">in</span> images:</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  img <span class="op">=</span> background_correct(img)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  save_image(img, <span class="st">"out_directory/corrected.png"</span>)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="decompose-programs-into-functions" class="level3">
<h3 class="anchored" data-anchor-id="decompose-programs-into-functions">Decompose programs into functions</h3>
<p>Functions make it easier to reason about your code, spot errors, and make changes. This also follows the <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">Don’t Repeat Yourself</a> principle aimed at reducing repetition by replacing it with abstractions that are more stable</p>
<p>Compare this chunk of code that rescales values using a min-max function (0-1)</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource R number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>df <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="at">a =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb23-3"><a href="#cb23-3"></a>  <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb23-4"><a href="#cb23-4"></a>  <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb23-5"><a href="#cb23-5"></a>  <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb23-6"><a href="#cb23-6"></a>)</span>
<span id="cb23-7"><a href="#cb23-7"></a></span>
<span id="cb23-8"><a href="#cb23-8"></a>df<span class="sc">$</span>a <span class="ot">&lt;-</span> (df<span class="sc">$</span>a <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>a, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> </span>
<span id="cb23-9"><a href="#cb23-9"></a>  (<span class="fu">max</span>(df<span class="sc">$</span>a, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>a, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb23-10"><a href="#cb23-10"></a>df<span class="sc">$</span>b <span class="ot">&lt;-</span> (df<span class="sc">$</span>b <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>b, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> </span>
<span id="cb23-11"><a href="#cb23-11"></a>  (<span class="fu">max</span>(df<span class="sc">$</span>b, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>a, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb23-12"><a href="#cb23-12"></a>df<span class="sc">$</span>c <span class="ot">&lt;-</span> (df<span class="sc">$</span>c <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>c, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> </span>
<span id="cb23-13"><a href="#cb23-13"></a>  (<span class="fu">max</span>(df<span class="sc">$</span>c, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>c, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb23-14"><a href="#cb23-14"></a>df<span class="sc">$</span>d <span class="ot">&lt;-</span> (df<span class="sc">$</span>d <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>d, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> </span>
<span id="cb23-15"><a href="#cb23-15"></a>  (<span class="fu">max</span>(df<span class="sc">$</span>d, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>d, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>to this function which does the same thing</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>rescale01 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  rng <span class="ot">&lt;-</span> <span class="fu">range</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  (x <span class="sc">-</span> rng[<span class="dv">1</span>]) <span class="sc">/</span> (rng[<span class="dv">2</span>] <span class="sc">-</span> rng[<span class="dv">1</span>])</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">lapply</span>(df, rescale01)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Which is easier to read? Which is easier to debug? Which is more efficient?</p>
</section>
<section id="give-functions-and-variables-meaningful-names" class="level3">
<h3 class="anchored" data-anchor-id="give-functions-and-variables-meaningful-names">Give functions and variables meaningful names</h3>
<ul>
<li>Programs are written for people and then computers</li>
<li>Use variable and function names that are meaningful and <strong>correct</strong></li>
<li>Keep names consistent. Use either <code>snake_case</code> or <code>camelCase</code> but try not to mix both</li>
</ul>
<p>Bad:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>lol <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">"Jozef"</span>, <span class="st">"Gennaro"</span>, <span class="st">"Matt"</span>, <span class="st">"Morgan"</span>, <span class="st">"Anthony"</span>))</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y, ...) {</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">main =</span> <span class="st">"Scatter plot of x and y"</span>, ...)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Better:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>ages <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>bioinfo_names <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">"Jozef"</span>, <span class="st">"Gennaro"</span>, <span class="st">"Matt"</span>, <span class="st">"Morgan"</span>, <span class="st">"Anthony"</span>))</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>plotScatterPlot <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y, ...) {</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">main =</span> <span class="st">"Scatter plot of x and y"</span>, ...)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="do-not-control-program-flow-with-comments" class="level3">
<h3 class="anchored" data-anchor-id="do-not-control-program-flow-with-comments">Do not control program flow with comments</h3>
<ul>
<li>this is error prone and makes it difficult or impossible to automate</li>
<li>Use if/else statements instead</li>
</ul>
<p>Bad:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Download the file</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#filename &lt;- "data.tsv"</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">#url &lt;- "http:://example.com/data.tsv"</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">#download.file(url, filename)</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in to a data.frame</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"data.tsv"</span>, <span class="at">sep=</span><span class="st">"</span><span class="sc">\t</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Good:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>filename <span class="ot">&lt;-</span> <span class="st">"data.tsv"</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"http:://example.com/data.tsv"</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(filename)) {</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(url, filename)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(filename)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="use-a-consistent-style" class="level3">
<h3 class="anchored" data-anchor-id="use-a-consistent-style">Use a consistent style</h3>
<p>Pick a <a href="https://style.tidyverse.org/">style guide</a> and stick with it. If using R, the <a href="https://styler.r-lib.org/index.html">styler</a> package can automatically clean up poorly formatted code. If using Python, <a href="https://black.readthedocs.io/en/stable/index.html">black</a> is a highly opinionated formatter that is pretty popular. Although, I think <a href="https://docs.astral.sh/ruff/">ruff</a> is currently all the rage with the Pythonistas these days.</p>
<p>Bad:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>flights<span class="sc">|&gt;</span><span class="fu">group_by</span>(dest)<span class="sc">|&gt;</span> <span class="fu">summarize</span>(</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="at">distance=</span><span class="fu">mean</span>( distance),<span class="at">speed =</span> <span class="fu">mean</span>(distance<span class="sc">/</span>air_time, <span class="at">na.rm=</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span> distance, <span class="at">y=</span>speed))<span class="sc">+</span><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>,<span class="at">span =</span> <span class="fl">0.5</span>,<span class="at">se =</span> <span class="cn">FALSE</span>,<span class="at">color =</span> <span class="st">"white"</span>,<span class="at">linewidth =</span><span class="dv">4</span>)<span class="sc">+</span><span class="fu">geom_point</span>()<span class="ot">-&gt;</span> flight_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Good:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>flight_plot <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dest) <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">distance =</span> <span class="fu">mean</span>(distance),</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">speed =</span> <span class="fu">mean</span>(distance <span class="sc">/</span> air_time, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> distance, <span class="at">y =</span> speed)) <span class="sc">+</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"loess"</span>,</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">span =</span> <span class="fl">0.5</span>,</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">se =</span> <span class="cn">FALSE</span>, </span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"white"</span>, </span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">linewidth =</span> <span class="dv">4</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="dont-use-right-hand-assignment" class="level3">
<h3 class="anchored" data-anchor-id="dont-use-right-hand-assignment">Don’t use right hand assignment</h3>
<p>This is R specific. I’ve seen this pop up with folks who are strong tidyverse adherents. I get it, that’s the direction of the piping operator. However, this right-hand assignment flies in the face of basically every other programming language, and since code is primarily read rather than executed, it’s much harder to scan a codebase and understand the variable assignment when the assignments can be anywhere in the pipe!</p>
<p><strong>Don’t do this</strong></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(...) <span class="sc">|&gt;</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(...) <span class="sc">|&gt;</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(...) <span class="sc">|&gt;</span> </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(...) <span class="ot">-&gt;</span> by_group</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>It’s much easier to look down a script and see that <code>by_group</code> is created by all of the piped operations when assigned normally.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>by_group <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(...) <span class="sc">|&gt;</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(...) <span class="sc">|&gt;</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(...) <span class="sc">|&gt;</span> </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="summary" class="level1">
<h1>Summary</h1>
<ul>
<li>Data management
<ul>
<li>Save all raw data and don’t modify it</li>
<li>Keep good backups and make sure they work. 3-2-1 rule</li>
<li>Use consistent, meaningful filenames that make sense to computers and reflect their content or function</li>
<li>Create analysis friendly data</li>
<li>Work with/ save data in the format that it is best suited to</li>
</ul></li>
<li>Project Organization
<ul>
<li>Use a consistent, well-defined project structure across all projects</li>
<li>Give each project a consistent and meaningful name</li>
<li>Use the structure of the project to organize where files go</li>
</ul></li>
<li>Tracking Changes
<ul>
<li>Keep changes small and save changes frequently</li>
<li>If manually tracking changes do so in a logical location in a plain text document</li>
<li>Use a version control system</li>
</ul></li>
<li>Software
<ul>
<li>Write a short description at the top of every script about what the script does and how to use it</li>
<li>Decompose programs into functions. Don’t Repeat Yourself</li>
<li>Give functions and variables meaningful names</li>
<li>Use statements for control flow instead of comments</li>
<li>Use a consistent style of coding. Use a code styler</li>
</ul></li>
</ul>
</section>
<section id="resources-references" class="level1">
<h1>Resources &amp; References</h1>
<section id="best-practices" class="level2">
<h2 class="anchored" data-anchor-id="best-practices">Best practices</h2>
<ul>
<li>Good Enough Practices in Scientific Computing: <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1005510#sec004">https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1005510#sec004</a></li>
<li>Backups: <a href="https://www.cisa.gov/sites/default/files/publications/data_backup_options.pdf">https://www.cisa.gov/sites/default/files/publications/data_backup_options.pdf</a></li>
<li>File naming: <a href="https://library.si.edu/sites/default/files/filenamingorganizing_20210609.pdf">https://library.si.edu/sites/default/files/filenamingorganizing_20210609.pdf</a></li>
<li>Tidy data: <a href="https://www.jstatsoft.org/article/view/v059i10">https://www.jstatsoft.org/article/view/v059i10</a></li>
<li>Frank Harrell’s R Workflow for Reproducible Analysis: <a href="https://hbiostat.org/rflow/">https://hbiostat.org/rflow/</a>
<ul>
<li>FH blog is also really good for statistical concepts: <a href="https://www.fharrell.com/">https://www.fharrell.com/</a></li>
</ul></li>
</ul>
</section>
<section id="bioinformatics" class="level2">
<h2 class="anchored" data-anchor-id="bioinformatics">Bioinformatics</h2>
<ul>
<li>Bioinformatics Data Skills: <a href="https://www.oreilly.com/library/view/bioinformatics-data-skills/9781449367480/">https://www.oreilly.com/library/view/bioinformatics-data-skills/9781449367480/</a></li>
<li>BioStars for bioinfo questions: <a href="https://www.biostars.org/">https://www.biostars.org/</a></li>
<li>Bioconductor common workflows: <a href="https://bioconductor.org/packages/release/BiocViews.html#___Workflow">https://bioconductor.org/packages/release/BiocViews.html#___Workflow</a></li>
</ul>
</section>
<section id="proficiency-with-computational-tools" class="level2">
<h2 class="anchored" data-anchor-id="proficiency-with-computational-tools">Proficiency with computational tools</h2>
<ul>
<li>MIT Missing Semester: <a href="https://missing.csail.mit.edu/">https://missing.csail.mit.edu/</a>
<ul>
<li>Really, check this one out</li>
</ul></li>
</ul>
</section>
<section id="r" class="level2">
<h2 class="anchored" data-anchor-id="r">R</h2>
<ul>
<li>R for Data Science: <a href="https://r4ds.hadley.nz/">https://r4ds.hadley.nz/</a></li>
<li>Advanced R: <a href="https://adv-r.hadley.nz/">https://adv-r.hadley.nz/</a></li>
<li>fasteR (base): <a href="https://github.com/matloff/fasteR">https://github.com/matloff/fasteR</a></li>
<li>Efficient R Programming: <a href="https://bookdown.org/csgillespie/efficientR/">https://bookdown.org/csgillespie/efficientR/</a></li>
<li>R performance tips: <a href="https://peerj.com/preprints/26605.pdf">https://peerj.com/preprints/26605.pdf</a></li>
<li>R Inferno: <a href="https://www.burns-stat.com/documents/books/the-r-inferno/">https://www.burns-stat.com/documents/books/the-r-inferno/</a></li>
<li>Introduction to data science: <a href="https://rafalab.github.io/dsbook-part-1/">https://rafalab.github.io/dsbook-part-1/</a></li>
<li>Advanced data science: <a href="https://rafalab.github.io/dsbook-part-2/">https://rafalab.github.io/dsbook-part-2/</a></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="Welcome!">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Welcome!</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./linux.html" class="pagination-link" aria-label="Command line basics">
        <span class="nav-page-text">Command line basics</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>